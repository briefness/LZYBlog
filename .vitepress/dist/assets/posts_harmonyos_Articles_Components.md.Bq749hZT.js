import{_ as i,o as a,c as t,ag as e}from"./chunks/framework.CbQjVMS6.js";const E=JSON.parse('{"title":"é¸¿è’™å¼€å‘è¿›é˜¶ï¼ˆä¸ƒï¼‰ï¼šç»„ä»¶åŒ–ä¸åŠ¨æ€æ ·å¼ (AttributeModifier)","description":"","frontmatter":{},"headers":[],"relativePath":"posts/harmonyos/Articles/Components.md","filePath":"posts/harmonyos/Articles/Components.md"}'),n={name:"posts/harmonyos/Articles/Components.md"};function l(r,s,h,p,o,k){return a(),t("div",null,[...s[0]||(s[0]=[e(`<h1 id="é¸¿è’™å¼€å‘è¿›é˜¶-ä¸ƒ-ç»„ä»¶åŒ–ä¸åŠ¨æ€æ ·å¼-attributemodifier" tabindex="-1">é¸¿è’™å¼€å‘è¿›é˜¶ï¼ˆä¸ƒï¼‰ï¼šç»„ä»¶åŒ–ä¸åŠ¨æ€æ ·å¼ (AttributeModifier) <a class="header-anchor" href="#é¸¿è’™å¼€å‘è¿›é˜¶-ä¸ƒ-ç»„ä»¶åŒ–ä¸åŠ¨æ€æ ·å¼-attributemodifier" aria-label="Permalink to &quot;é¸¿è’™å¼€å‘è¿›é˜¶ï¼ˆä¸ƒï¼‰ï¼šç»„ä»¶åŒ–ä¸åŠ¨æ€æ ·å¼ (AttributeModifier)&quot;">â€‹</a></h1><blockquote><p>ğŸ”— <strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://github.com/briefness/HarmonyDemo" target="_blank" rel="noreferrer">https://github.com/briefness/HarmonyDemo</a></p></blockquote><blockquote><p><strong>æ›´æ–°è¯´æ˜</strong>ï¼šæœ¬æ–‡å°†ä»‹ç» <strong>AttributeModifier</strong> åŠå…¶å¯¹ <strong>RenderNode</strong> æ ‘çš„ä¼˜åŒ–ã€‚</p></blockquote><h2 id="ä¸€ã€ç†è®ºåŸºç¡€-rendernode-ä¸ç»„ä»¶å¤ç”¨" tabindex="-1">ä¸€ã€ç†è®ºåŸºç¡€ï¼šRenderNode ä¸ç»„ä»¶å¤ç”¨ <a class="header-anchor" href="#ä¸€ã€ç†è®ºåŸºç¡€-rendernode-ä¸ç»„ä»¶å¤ç”¨" aria-label="Permalink to &quot;ä¸€ã€ç†è®ºåŸºç¡€ï¼šRenderNode ä¸ç»„ä»¶å¤ç”¨&quot;">â€‹</a></h2><h3 id="_1-1-å£°æ˜å¼-ui-çš„å¼€é”€" tabindex="-1">1.1 å£°æ˜å¼ UI çš„å¼€é”€ <a class="header-anchor" href="#_1-1-å£°æ˜å¼-ui-çš„å¼€é”€" aria-label="Permalink to &quot;1.1 å£°æ˜å¼ UI çš„å¼€é”€&quot;">â€‹</a></h3><p>åœ¨å£°æ˜å¼ UI ä¸­ï¼Œ<code>if (show) { Text() }</code> å¦‚æœçŠ¶æ€é¢‘ç¹åˆ‡æ¢ï¼Œæ¡†æ¶éœ€è¦ä¸æ–­åœ°åˆ›å»ºå’Œé”€æ¯ C++ å¯¹è±¡ã€‚</p><h3 id="_1-2-rendernode-æ ‘" tabindex="-1">1.2 RenderNode æ ‘ <a class="header-anchor" href="#_1-2-rendernode-æ ‘" aria-label="Permalink to &quot;1.2 RenderNode æ ‘&quot;">â€‹</a></h3><p>ArkUI çš„ç»„ä»¶ï¼ˆText, Columnï¼‰åœ¨ C++ å±‚å¯¹åº”ç€ <strong>RenderNode</strong>ã€‚</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    TS[&quot;ArkTS ç»„ä»¶ (JS å¯¹è±¡)&quot;] --&gt;|Diff è®¡ç®—| RN(&quot;RenderNode (C++ å¯¹è±¡)&quot;)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    RN --&gt;|æ¸²æŸ“æŒ‡ä»¤| RS{&quot;æ¸²æŸ“æœåŠ¡&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style TS fill:#f9f,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style RN fill:#bbf,stroke:#333</span></span></code></pre></div><ul><li><strong>Diff ç®—æ³•</strong>: å½“çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ¡†æ¶ä¼šå¯¹æ¯”æ–°æ—§ UI æ ‘ï¼Œè®¡ç®—æœ€å°æ›´æ–°è·¯å¾„ã€‚</li><li><strong>ç»„ä»¶å¤ç”¨</strong>: å¯¹äº <code>LazyForEach</code> ç­‰åœºæ™¯ï¼Œæ¡†æ¶ä¼šç¼“å­˜ RenderNodeï¼Œé¿å…é‡å¤åˆ›å»ºå¼€é”€ã€‚</li></ul><blockquote><p><strong>AttributeModifier çš„è¯ç”Ÿ</strong>: ä¸ºäº†é¿å…åœ¨ JS ä¾§é¢‘ç¹è®¾ç½®å±æ€§å¯¼è‡´é¢‘ç¹çš„ JS&lt;-&gt;C++ é€šä¿¡ï¼ŒHarmonyOS å¼•å…¥äº† RenderNode çº§åˆ«çš„ç›´æ¥ä¿®æ”¹æœºåˆ¶ã€‚</p></blockquote><h2 id="äºŒã€attributemodifier" tabindex="-1">äºŒã€AttributeModifier <a class="header-anchor" href="#äºŒã€attributemodifier" aria-label="Permalink to &quot;äºŒã€AttributeModifier&quot;">â€‹</a></h2><p>å®ƒå®ç°äº† <strong>â€œæ ·å¼ä¸é€»è¾‘çš„åˆ†ç¦»â€</strong>ã€‚</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®šä¹‰ä¸€ä¸ª Modifierï¼Œå®ƒç›´æ¥æŒæœ‰ C++ å±æ€§å¯¹è±¡çš„å¼•ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CardModifier</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AttributeModifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ColumnAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  applyNormalAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">instance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ColumnAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // è¿™æ®µé€»è¾‘åœ¨åº•å±‚æ‰§è¡Œæ•ˆç‡æé«˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.isHighLight) { </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       instance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">backgroundColor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Color.Blue)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-1-æ ¸å¿ƒä¼˜åŠ¿" tabindex="-1">2.1 æ ¸å¿ƒä¼˜åŠ¿ <a class="header-anchor" href="#_2-1-æ ¸å¿ƒä¼˜åŠ¿" aria-label="Permalink to &quot;2.1 æ ¸å¿ƒä¼˜åŠ¿&quot;">â€‹</a></h3><ol><li><strong>é€»è¾‘è§£è€¦</strong>ï¼šbuild() å‡½æ•°åªè´Ÿè´£ç»“æ„ï¼ŒModifier è´Ÿè´£æ ·å¼ã€‚</li><li><strong>æ€§èƒ½æ›´ä¼˜</strong>ï¼šå‡å°‘äº† JS ä¾§é‡æ–°æ‰§è¡Œæ•´ä¸ª build é—­åŒ…çš„æ¶ˆè€—ã€‚</li></ol><h2 id="ä¸‰ã€å·¥ç¨‹åŒ–æ¶æ„-layered-architecture" tabindex="-1">ä¸‰ã€å·¥ç¨‹åŒ–æ¶æ„ (Layered Architecture) <a class="header-anchor" href="#ä¸‰ã€å·¥ç¨‹åŒ–æ¶æ„-layered-architecture" aria-label="Permalink to &quot;ä¸‰ã€å·¥ç¨‹åŒ–æ¶æ„ (Layered Architecture)&quot;">â€‹</a></h2><p>éšç€é¡¹ç›®å˜å¤§ï¼Œä»£ç ç»„ç»‡å˜å¾—è‡³å…³é‡è¦ã€‚</p><h3 id="_3-1-æ¶æ„æ¨¡å‹-hap-hsp-har" tabindex="-1">3.1 æ¶æ„æ¨¡å‹ (HAP/HSP/HAR) <a class="header-anchor" href="#_3-1-æ¶æ„æ¨¡å‹-hap-hsp-har" aria-label="Permalink to &quot;3.1 æ¶æ„æ¨¡å‹ (HAP/HSP/HAR)&quot;">â€‹</a></h3><ul><li><strong>Product (Entry HAP)</strong>: å£³å·¥ç¨‹ï¼Œè´Ÿè´£ç»„è£…ã€‚</li><li><strong>Feature (HSP åŠ¨æ€åº“)</strong>: ä¸šåŠ¡æ¨¡å—ã€‚ <ul><li><strong>HSP ä¼˜åŠ¿</strong>: è¿è¡Œæ—¶å…±äº«ã€‚å¦‚æœå¤šä¸ª HAP å¼•ç”¨åŒä¸€ä¸ª HSPï¼Œå†…å­˜ä¸­åªæœ‰ä¸€ä»½ä»£ç ã€‚</li></ul></li><li><strong>Common (HAR é™æ€åº“)</strong>: å·¥å…·åº“ã€‚ <ul><li><strong>HAR ç‰¹æ€§</strong>: ç¼–è¯‘æœŸé€šè¿‡ <strong>Rollup</strong> æ‰“åŒ…è¿›å¼•ç”¨æ–¹ã€‚</li></ul></li></ul><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Entry[&quot;Entry HAP (å£³å·¥ç¨‹)&quot;] --&gt;|è¿è¡Œæ—¶é“¾æ¥| FeatureA[&quot;ç‰¹æ€§ HSP A&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Entry --&gt;|è¿è¡Œæ—¶é“¾æ¥| FeatureB[&quot;ç‰¹æ€§ HSP B&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FeatureA --&gt;|ç¼–è¯‘æœŸåµŒå…¥| Utils[&quot;å…¬å…± HAR (å·¥å…·åº“)&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FeatureB --&gt;|ç¼–è¯‘æœŸåµŒå…¥| Utils</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style Entry fill:#f9f,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style FeatureA fill:#bbf,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style FeatureB fill:#bbf,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style Utils fill:#e2e2e2,stroke:#333,stroke-dasharray: 5 5</span></span></code></pre></div><h2 id="å››ã€å®æˆ˜ä¸ç›‘æ§" tabindex="-1">å››ã€å®æˆ˜ä¸ç›‘æ§ <a class="header-anchor" href="#å››ã€å®æˆ˜ä¸ç›‘æ§" aria-label="Permalink to &quot;å››ã€å®æˆ˜ä¸ç›‘æ§&quot;">â€‹</a></h2><h3 id="_4-1-hitracemeter" tabindex="-1">4.1 hiTraceMeter <a class="header-anchor" href="#_4-1-hitracemeter" aria-label="Permalink to &quot;4.1 hiTraceMeter&quot;">â€‹</a></h3><p>å¦‚ä½•è¯æ˜ä½ çš„ä¼˜åŒ–æœ‰æ•ˆï¼Ÿä½¿ç”¨ <code>hiTraceMeter</code> æ‰“ç‚¹ã€‚</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { hiTraceMeter } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@kit.PerformanceAnalysisKit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hiTraceMeter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyLayout&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ... build é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hiTraceMeter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">finishTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyLayout&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>åœ¨ DevEco çš„ Profiler ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ®µä»£ç æ¶ˆè€—äº†å¤šå°‘å¾®ç§’ã€‚</p><h2 id="äº”ã€æ€»ç»“" tabindex="-1">äº”ã€æ€»ç»“ <a class="header-anchor" href="#äº”ã€æ€»ç»“" aria-label="Permalink to &quot;äº”ã€æ€»ç»“&quot;">â€‹</a></h2><p>ç»„ä»¶åŒ–ä¸ä»…æ˜¯æ‹†åˆ†æ–‡ä»¶ï¼Œæ›´æ˜¯<strong>çŠ¶æ€ä¸é€»è¾‘çš„æ²»ç†</strong>ã€‚</p><ul><li>ç†è§£ <strong>HAP/HSP/HAR</strong> çš„ç‰©ç†åˆ†åŒ…ã€‚</li><li>åˆ©ç”¨ <strong>AttributeModifier</strong> æå‡æ¸²æŸ“æ€§èƒ½ã€‚</li></ul><p>è‡³æ­¤å·²å®Œæˆäº† UI äº¤äº’çš„å­¦ä¹ ã€‚æ¥ä¸‹æ¥ï¼Œå°†æ·±å…¥<strong>æ•°æ®ä¸é€šä¿¡</strong>éƒ¨åˆ†ï¼Œæ¢è®¨é«˜æ€§èƒ½ç½‘ç»œè¯·æ±‚ä¸æ•°æ®åº“å®æˆ˜ã€‚</p>`,30)])])}const g=i(n,[["render",l]]);export{E as __pageData,g as default};
