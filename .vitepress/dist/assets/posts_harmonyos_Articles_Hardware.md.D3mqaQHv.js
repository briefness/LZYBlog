import{_ as a,o as i,c as n,ag as t}from"./chunks/framework.CbQjVMS6.js";const d=JSON.parse('{"title":"é¸¿è’™å¼€å‘é«˜çº§ï¼ˆåäº”ï¼‰ï¼šç¡¬ä»¶è®¿é—®ä¸æ²™ç®±æœºåˆ¶ (Hardware & Sandbox)","description":"","frontmatter":{},"headers":[],"relativePath":"posts/harmonyos/Articles/Hardware.md","filePath":"posts/harmonyos/Articles/Hardware.md"}'),l={name:"posts/harmonyos/Articles/Hardware.md"};function e(p,s,h,o,r,k){return i(),n("div",null,[...s[0]||(s[0]=[t(`<h1 id="é¸¿è’™å¼€å‘é«˜çº§-åäº”-ç¡¬ä»¶è®¿é—®ä¸æ²™ç®±æœºåˆ¶-hardware-sandbox" tabindex="-1">é¸¿è’™å¼€å‘é«˜çº§ï¼ˆåäº”ï¼‰ï¼šç¡¬ä»¶è®¿é—®ä¸æ²™ç®±æœºåˆ¶ (Hardware &amp; Sandbox) <a class="header-anchor" href="#é¸¿è’™å¼€å‘é«˜çº§-åäº”-ç¡¬ä»¶è®¿é—®ä¸æ²™ç®±æœºåˆ¶-hardware-sandbox" aria-label="Permalink to &quot;é¸¿è’™å¼€å‘é«˜çº§ï¼ˆåäº”ï¼‰ï¼šç¡¬ä»¶è®¿é—®ä¸æ²™ç®±æœºåˆ¶ (Hardware &amp; Sandbox)&quot;">â€‹</a></h1><blockquote><p>ğŸ”— <strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://github.com/briefness/HarmonyDemo" target="_blank" rel="noreferrer">https://github.com/briefness/HarmonyDemo</a></p></blockquote><blockquote><p><strong>æ›´æ–°è¯´æ˜</strong>ï¼šæœ¬æ–‡å°†ä»‹ç»å®‰å…¨æ§ä»¶åŠ <strong>åº”ç”¨æ²™ç®± (App Sandbox)</strong> å’Œ <strong>Token é‰´æƒ</strong> æœºåˆ¶ã€‚</p></blockquote><h2 id="ä¸€ã€ç†è®ºåŸºç¡€-åº”ç”¨æ²™ç®±-sandbox" tabindex="-1">ä¸€ã€ç†è®ºåŸºç¡€ï¼šåº”ç”¨æ²™ç®± (Sandbox) <a class="header-anchor" href="#ä¸€ã€ç†è®ºåŸºç¡€-åº”ç”¨æ²™ç®±-sandbox" aria-label="Permalink to &quot;ä¸€ã€ç†è®ºåŸºç¡€ï¼šåº”ç”¨æ²™ç®± (Sandbox)&quot;">â€‹</a></h2><h3 id="_1-1-ä»€ä¹ˆæ˜¯æ²™ç®±" tabindex="-1">1.1 ä»€ä¹ˆæ˜¯æ²™ç®±ï¼Ÿ <a class="header-anchor" href="#_1-1-ä»€ä¹ˆæ˜¯æ²™ç®±" aria-label="Permalink to &quot;1.1 ä»€ä¹ˆæ˜¯æ²™ç®±ï¼Ÿ&quot;">â€‹</a></h3><p>åœ¨ HarmonyOS ä¸­ï¼Œæ¯ä¸ªåº”ç”¨éƒ½è¿è¡Œåœ¨è‡ªå·±ç‹¬ç«‹çš„æ²™ç®±ç¯å¢ƒä¸­ã€‚</p><ul><li><strong>æ–‡ä»¶éš”ç¦»</strong>: App A çœ‹åˆ°çš„ <code>/data/storage</code> å’Œ App B çœ‹åˆ°çš„å®Œå…¨ä¸åŒã€‚å…¶ä»–åº”ç”¨çš„æ–‡ä»¶ä¸å¯ç›´æ¥è®¿é—®ã€‚</li><li><strong>è¿›ç¨‹éš”ç¦»</strong>: å‰æ–‡æåˆ°çš„ Actor æ¨¡å‹ï¼Œä¿è¯äº†å†…å­˜éš”ç¦»ã€‚</li></ul><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Kernel[&quot;HarmonyOS å†…æ ¸&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph Sandbox_A [&quot;åº”ç”¨ A æ²™ç®±&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ProcessA[&quot;App è¿›ç¨‹&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        DataA[&quot;/data/app/el2/100/base/...&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph Sandbox_B [&quot;åº”ç”¨ B æ²™ç®±&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ProcessB[&quot;App è¿›ç¨‹&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        DataB[&quot;/data/app/el2/100/base/...&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ProcessA -.-&gt;|æ— æƒè®¿é—®| DataB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ProcessB -.-&gt;|æ— æƒè®¿é—®| DataA</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Kernel --&gt;|ç®¡ç†| Sandbox_A</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Kernel --&gt;|ç®¡ç†| Sandbox_B</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style Sandbox_A fill:#e6fffa,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style Sandbox_B fill:#fff0f6,stroke:#333</span></span></code></pre></div><h3 id="_1-2-æƒé™æ§åˆ¶-acl-token" tabindex="-1">1.2 æƒé™æ§åˆ¶ (ACL &amp; Token) <a class="header-anchor" href="#_1-2-æƒé™æ§åˆ¶-acl-token" aria-label="Permalink to &quot;1.2 æƒé™æ§åˆ¶ (ACL &amp; Token)&quot;">â€‹</a></h3><p>å½“åº”ç”¨ç”³è¯·æƒé™æ—¶ï¼Œç³»ç»Ÿæ˜¯å¦‚ä½•è®°å½•çš„ï¼Ÿ</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    App[&quot;åº”ç”¨ App (TokenID)&quot;] --&gt;|1. è¯·æ±‚æƒé™| Kernel{&quot;ç³»ç»Ÿå†…æ ¸&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Kernel --&gt;|2. æŸ¥è¯¢| ATM(&quot;ATM (è®¿é—®ä»¤ç‰Œç®¡ç†)&quot;)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ATM --&gt;|3. æ£€æŸ¥ ACL| DB[&quot;æƒé™æ•°æ®åº“&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    DB --&gt;|4. è¿”å›ç»“æœ| ATM</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ATM --&gt;|5. å‡†å…¥/æ‹’ç»| App</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style App fill:#f9f,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style ATM fill:#bbf,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style DB fill:#9f9,stroke:#333</span></span></code></pre></div><ul><li><strong>TokenID</strong>: æ¯ä¸ªåº”ç”¨å®‰è£…æ—¶åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ TokenIDã€‚</li><li><strong>ATM (Access Token Manager)</strong>: ç³»ç»Ÿæ ¸å¿ƒæœåŠ¡ã€‚å½“è°ƒç”¨ <code>Location</code> API æ—¶ï¼Œå†…æ ¸ä¼šæ‹¿ç€åº”ç”¨çš„ TokenID å» ATM æŸ¥ ACL (Access Control List)ã€‚ <ul><li>å¦‚æœæœ‰æƒé™ -&gt; æ”¾è¡Œã€‚</li><li>å¦‚æœæ²¡æœ‰ -&gt; æŠ›å‡º SecurityExceptionã€‚</li></ul></li></ul><h2 id="äºŒã€å®‰å…¨æ§ä»¶-security-component" tabindex="-1">äºŒã€å®‰å…¨æ§ä»¶ (Security Component) <a class="header-anchor" href="#äºŒã€å®‰å…¨æ§ä»¶-security-component" aria-label="Permalink to &quot;äºŒã€å®‰å…¨æ§ä»¶ (Security Component)&quot;">â€‹</a></h2><p>åŸºäºäº¤äº’çš„æˆæƒæ¨¡å¼ã€‚</p><h3 id="_2-1-æ ¸å¿ƒåŸç†" tabindex="-1">2.1 æ ¸å¿ƒåŸç† <a class="header-anchor" href="#_2-1-æ ¸å¿ƒåŸç†" aria-label="Permalink to &quot;2.1 æ ¸å¿ƒåŸç†&quot;">â€‹</a></h3><p>ä¸ºä»€ä¹ˆç‚¹äº† <code>LocationButton</code> å°±èƒ½å®šä½ï¼Ÿ</p><ol><li><strong>å—ä¿¡ä»»çš„ UI</strong>: è¯¥æŒ‰é’®ç”±ç³»ç»Ÿè¿›ç¨‹æ¸²æŸ“ï¼Œåº”ç”¨æ— æ³•ä¼ªé€ ã€æ— æ³•å®Œå…¨é®æŒ¡ã€‚</li><li><strong>ä¸´æ—¶æˆæƒ</strong>: ç”¨æˆ·ç‚¹å‡»ç¬é—´ï¼Œç³»ç»Ÿé€šè¿‡å†…æ ¸å‘åº”ç”¨è¿›ç¨‹å‘æ”¾ä¸€ä¸ª<strong>ä¸´æ—¶ Token</strong>ã€‚</li><li><strong>æ—¶æ•ˆæ€§</strong>: è¿™ä¸ª Token ä»…åœ¨å›è°ƒå‡½æ•°æ‰§è¡ŒæœŸé—´æˆ–çŸ­æ—¶é—´å†…æœ‰æ•ˆã€‚</li></ol><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequenceDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant User</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant SysUI as å®‰å…¨ç»„ä»¶æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant Kernel as å†…æ ¸ (ä»¤ç‰Œç®¡ç†)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant App</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    User-&gt;&gt;SysUI: ç‚¹å‡» LocationButton</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SysUI-&gt;&gt;Kernel: è¯·æ±‚ä¸´æ—¶ Token</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Kernel-&gt;&gt;App: æˆäºˆä¸´æ—¶æƒé™ (Token)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    App-&gt;&gt;App: onClick Callback()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    App-&gt;&gt;Kernel: getLocation() æ£€æŸ¥ Token</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Kernel--&gt;&gt;App: å…è®¸è®¿é—®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Note over App, Kernel: Token å¿«é€Ÿè¿‡æœŸ</span></span></code></pre></div><h3 id="_2-2-å®æˆ˜-locationbutton" tabindex="-1">2.2 å®æˆ˜ï¼šLocationButton <a class="header-anchor" href="#_2-2-å®æˆ˜-locationbutton" aria-label="Permalink to &quot;2.2 å®æˆ˜ï¼šLocationButton&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LocationButton</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocationButtonOnClickResult.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SUCCESS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       // æ­¤æ—¶ ATM ä¸´æ—¶æ”¾å¼€äº†æƒé™æ£€æŸ¥</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span></code></pre></div><h2 id="ä¸‰ã€éšç§ä¸-picker" tabindex="-1">ä¸‰ã€éšç§ä¸ Picker <a class="header-anchor" href="#ä¸‰ã€éšç§ä¸-picker" aria-label="Permalink to &quot;ä¸‰ã€éšç§ä¸ Picker&quot;">â€‹</a></h2><h3 id="_3-1-æœ€å°åŒ–æˆæƒ" tabindex="-1">3.1 æœ€å°åŒ–æˆæƒ <a class="header-anchor" href="#_3-1-æœ€å°åŒ–æˆæƒ" aria-label="Permalink to &quot;3.1 æœ€å°åŒ–æˆæƒ&quot;">â€‹</a></h3><p>ä»¥å‰è¯»å–ç›¸å†Œéœ€è¦ <code>READ_IMAGE</code> æƒé™ï¼Œè¿™æ„å‘³ç€åº”ç”¨èƒ½æ‰«ææ‰€æœ‰ç…§ç‰‡ã€‚ ç°åœ¨ä½¿ç”¨ <code>PhotoViewPicker</code>ï¼š</p><ol><li>App æ‹‰èµ·ç³»ç»Ÿå›¾åº“ï¼ˆç‹¬ç«‹è¿›ç¨‹ï¼‰ã€‚</li><li>ç”¨æˆ·é€‰æ‹© 1 å¼ å›¾ã€‚</li><li>ç³»ç»ŸåªæŠŠè¿™ <strong>1 å¼ å›¾çš„ Read æƒé™</strong> æˆäºˆç»™ Appã€‚ è¿™ä½“ç°äº† <strong>â€œæœ€å°ç‰¹æƒåŸåˆ™â€</strong>ã€‚</li></ol><h2 id="å››ã€æ€»ç»“" tabindex="-1">å››ã€æ€»ç»“ <a class="header-anchor" href="#å››ã€æ€»ç»“" aria-label="Permalink to &quot;å››ã€æ€»ç»“&quot;">â€‹</a></h2><p>HarmonyOS çš„å®‰å…¨ä½“ç³»æ„å»ºåœ¨ï¼š</p><ol><li><strong>æ²™ç®±</strong>: ç‰©ç†éš”ç¦»ã€‚</li><li><strong>Token</strong>: èº«ä»½è®¤è¯ã€‚</li><li><strong>å®‰å…¨æ§ä»¶</strong>: äº¤äº’å³æˆæƒã€‚</li></ol><p>è‡³æ­¤ï¼Œå·²å®Œæˆäº†ç³»ç»Ÿèƒ½åŠ›çš„å­¦ä¹ ã€‚ ä¸‹ä¸€é˜¶æ®µï¼ˆä¹Ÿæ˜¯æœ€åé˜¶æ®µï¼‰ï¼Œå°†è¿›å…¥ <strong>ç”Ÿæ€èåˆä¸å·¥ç¨‹åŒ–</strong>ï¼Œæ¢è®¨åŸå­åŒ–æœåŠ¡ã€æ€§èƒ½è°ƒä¼˜å’Œå‘å¸ƒç­¾åçš„æµç¨‹ã€‚</p>`,28)])])}const c=a(l,[["render",e]]);export{d as __pageData,c as default};
