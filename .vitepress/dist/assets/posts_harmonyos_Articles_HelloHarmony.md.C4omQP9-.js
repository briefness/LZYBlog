import{_ as a,o as i,c as n,ag as l}from"./chunks/framework.CbQjVMS6.js";const E=JSON.parse('{"title":"鸿蒙开发从入门到精通（一）：Hello HarmonyOS","description":"","frontmatter":{},"headers":[],"relativePath":"posts/harmonyos/Articles/HelloHarmony.md","filePath":"posts/harmonyos/Articles/HelloHarmony.md"}'),e={name:"posts/harmonyos/Articles/HelloHarmony.md"};function t(o,s,r,p,h,k){return i(),n("div",null,[...s[0]||(s[0]=[l(`<h1 id="鸿蒙开发从入门到精通-一-hello-harmonyos" tabindex="-1">鸿蒙开发从入门到精通（一）：Hello HarmonyOS <a class="header-anchor" href="#鸿蒙开发从入门到精通-一-hello-harmonyos" aria-label="Permalink to &quot;鸿蒙开发从入门到精通（一）：Hello HarmonyOS&quot;">​</a></h1><blockquote><p>🔗 <strong>项目地址</strong>：<a href="https://github.com/briefness/HarmonyDemo" target="_blank" rel="noreferrer">https://github.com/briefness/HarmonyDemo</a></p></blockquote><p>欢迎来到鸿蒙（HarmonyOS）开发的世界。鸿蒙Next（HarmonyOS NEXT）作为华为推出的全场景分布式操作系统，带来了全新的原生体验。本系列文章将带从零开始，一步步探索鸿蒙应用开发。</p><p>这是系列的第一篇，主要内容涵盖环境搭建，并编写第一个“Hello World”应用。除操作步骤外，还会探讨 <strong>ArkTS 的编译原理</strong>以及<strong>HAP 包的结构</strong>，旨在让读者知其然，更知其所以然。</p><h2 id="一、准备工作" tabindex="-1">一、准备工作 <a class="header-anchor" href="#一、准备工作" aria-label="Permalink to &quot;一、准备工作&quot;">​</a></h2><p>开始编码前，需要安装 <strong>DevEco Studio</strong>。这是华为官方基于 IntelliJ IDEA 构建的集成开发环境（IDE），提供了代码编辑、调试和预览功能。</p><p>请前往 <a href="https://developer.huawei.com/consumer/cn/deveco-studio/" target="_blank" rel="noreferrer">HarmonyOS 开发者官网</a> 下载并安装最新版本的 DevEco Studio。</p><h2 id="二、深入理论-arkts-与编译原理" tabindex="-1">二、深入理论：ArkTS 与编译原理 <a class="header-anchor" href="#二、深入理论-arkts-与编译原理" aria-label="Permalink to &quot;二、深入理论：ArkTS 与编译原理&quot;">​</a></h2><p>在编写代码之前，首先需要理解所使用的语言。 鸿蒙应用主要使用 <strong>ArkTS</strong> 开发。它和 TypeScript (TS) 有什么区别？</p><p>简单来说：<strong>ArkTS 是 TS 的超集兼子集，专为高性能而生。</strong></p><h3 id="_2-1-arkts-编译流程-ark-compiler" tabindex="-1">2.1 ArkTS 编译流程 (Ark Compiler) <a class="header-anchor" href="#_2-1-arkts-编译流程-ark-compiler" aria-label="Permalink to &quot;2.1 ArkTS 编译流程 (Ark Compiler)&quot;">​</a></h3><p>传统的 JS/TS 运行在 V8 引擎上，边解释边执行 (JIT)，虽然灵活但启动慢、耗内存。 ArkTS 采用了 <strong>AOT (Ahead-Of-Time)</strong> 编译技术。</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph LR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A[&quot;源码 (.ets)&quot;] --&gt;|编译| B(&quot;Ark Bytecode (.abc)&quot;)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt;|安装/运行时| C{&quot;设备 CPU&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C --&gt;|执行| D[&quot;机器码&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style A fill:#f9f,stroke:#333,stroke-width:2px</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style B fill:#bbf,stroke:#333,stroke-width:2px</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style D fill:#9f9,stroke:#333,stroke-width:2px</span></span></code></pre></div><ol><li><strong>源码阶段 (.ets)</strong>: 开发者编写的 ArkTS 源码。</li><li><strong>字节码阶段 (.abc)</strong>: 编译期间，源码被编译成 <strong>Ark Bytecode</strong>。这是一个优化的二进制格式，去除了动态类型的开销。</li><li><strong>机器码阶段 (Machine Code)</strong>: 在设备安装或空闲时，Ark Compiler 进一步将字节码编译成设备 CPU 能直接执行的机器码。</li></ol><blockquote><p><strong>核心优势</strong>: 这种机制让鸿蒙应用的启动速度接近 C/C++ 原生应用，消除了传统 JS 虚拟机的“冷启动”延迟。</p></blockquote><h3 id="_2-2-编译器工作流细节" tabindex="-1">2.2 编译器工作流细节 <a class="header-anchor" href="#_2-2-编译器工作流细节" aria-label="Permalink to &quot;2.2 编译器工作流细节&quot;">​</a></h3><p>Ark Compiler 分为两部分：</p><ul><li><strong>前端 (Frontend)</strong>: 在开发者的电脑上运行 (DevEco Studio)。将 <code>.ets</code> 转为 <code>.abc</code>。</li><li><strong>后端 (Backend)</strong>: 在手机上运行。将 <code>.abc</code> 转为机器码。 这意味着，<strong>类型检查</strong> 主要发生在前端。如果代码里有 <code>any</code> 类型乱飞，虽然编译能过，但会丧失 AOT 的优化优势。</li></ul><h2 id="三、创建第一个项目" tabindex="-1">三、创建第一个项目 <a class="header-anchor" href="#三、创建第一个项目" aria-label="Permalink to &quot;三、创建第一个项目&quot;">​</a></h2><ol><li>打开 DevEco Studio，点击 <strong>Create Project</strong>。</li><li>选择 <strong>Empty Ability</strong> 模板（最基础的空项目模板）。</li><li>填写项目名称（例如 <code>HelloHarmony</code>），选择保存路径。</li><li>点击 <strong>Finish</strong>，等待项目同步完成。</li></ol><h3 id="_3-1-hap-包结构解析" tabindex="-1">3.1 HAP 包结构解析 <a class="header-anchor" href="#_3-1-hap-包结构解析" aria-label="Permalink to &quot;3.1 HAP 包结构解析&quot;">​</a></h3><p>项目创建完成后，你会看到很多文件。最终打包出来的产物叫 <strong>HAP (Harmony Ability Package)</strong>。 可以把它理解为 Android 的 APK，但结构更原生：</p><ul><li><strong>ets/</strong>: 存放代码逻辑。</li><li><strong>resources/</strong>: 存放图片、字符串、布局等资源文件（支持多语言、暗黑模式自动适配）。</li><li><strong>module.json5</strong>: <strong>核心</strong>配置文件。声明了应用的权限、入口页面 (EntryAbility) 以及设备兼容性。</li></ul><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HAP[&quot;HAP 包&quot;] --&gt; ETS[&quot;ets (代码)&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HAP --&gt; Res[&quot;resources (资源)&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HAP --&gt; Conf[&quot;module.json5 (配置)&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ETS --&gt; Components[UI 组件]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ETS --&gt; Logic[业务逻辑]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Res --&gt; Base[base/element/string.json]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Res --&gt; Raw[rawfile/image.png]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style HAP fill:#f9f,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style ETS fill:#bbf,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style Res fill:#bbf,stroke:#333</span></span></code></pre></div><h3 id="_3-2-配置文件详解-main-pages-json" tabindex="-1">3.2 配置文件详解 (main_pages.json) <a class="header-anchor" href="#_3-2-配置文件详解-main-pages-json" aria-label="Permalink to &quot;3.2 配置文件详解 (main_pages.json)&quot;">​</a></h3><p>除了 <code>module.json5</code>，还有一个极易被忽略的文件：<code>main_pages.json</code>。</p><ul><li><strong>位置</strong>: <code>src/main/resources/base/profile/main_pages.json</code></li><li><strong>作用</strong>: 注册所有的页面路由。</li><li><strong>注意</strong>: 即使你在 <code>ets</code> 文件夹下创建了 <code>.ets</code> 文件，如果没有在这里注册，<code>router.push</code> 是无法跳转的（这也是初学者最常遇到的 404 错误）。</li></ul><h2 id="四、编写代码-hello-harmonyos" tabindex="-1">四、编写代码：Hello HarmonyOS <a class="header-anchor" href="#四、编写代码-hello-harmonyos" aria-label="Permalink to &quot;四、编写代码：Hello HarmonyOS&quot;">​</a></h2><p>找到项目中的 <code>entry/src/main/ets/pages/Index.ets</code> 文件。</p><h3 id="_4-1-代码实现" tabindex="-1">4.1 代码实现 <a class="header-anchor" href="#_4-1-代码实现" aria-label="Permalink to &quot;4.1 代码实现&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Index.ets</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@Entry</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@Component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">struct HelloHarmony {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 定义一个状态变量，用来存储要显示的文本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @State </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: string </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Hello HarmonyOS&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Row 容器，使内容水平居中</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Row</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Column 容器，使内容垂直居中</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      Column</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Text 组件，显示文本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.message)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fontSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置字体大小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fontWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(FontWeight.Bold) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置字体粗细</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;100%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Column 宽度占满父容器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;100%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Row 高度占满整个屏幕</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_4-2-代码解析" tabindex="-1">4.2 代码解析 <a class="header-anchor" href="#_4-2-代码解析" aria-label="Permalink to &quot;4.2 代码解析&quot;">​</a></h3><ul><li><strong><code>@Entry</code></strong>: 标记这个组件是页面的入口，渲染树的根节点。</li><li><strong><code>@Component</code></strong>: 标记这是一个自定义组件。在底层，这对应一个 C++ 的 <code>RenderNode</code> 对象。</li><li><strong><code>@State</code></strong>: 装饰器。它不仅仅是变量，更通过 <strong>Proxy</strong> 劫持了 setter；当值变化时，会自动通知依赖该变量的 UI 组件刷新。</li><li><strong><code>build()</code></strong>: UI 描述方法。注意，这里写的<strong>不是 HTML</strong>，也不是 XML，而是一个<strong>DSL (Domain Specific Language)</strong>。编译器会将其转化为高效的 UI 树构建指令。</li></ul><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Page[Page: HelloHarmony] --&gt; Row</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Row --&gt; Col[Column]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Col --&gt; Text[&quot;Text: &#39;Hello HarmonyOS&#39;&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style Page fill:#f96,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style Text fill:#9f9,stroke:#333</span></span></code></pre></div><h2 id="五、运行效果" tabindex="-1">五、运行效果 <a class="header-anchor" href="#五、运行效果" aria-label="Permalink to &quot;五、运行效果&quot;">​</a></h2><p>点击 IDE 上方的运行按钮，选择模拟器或真机，将看到如下界面：</p><h2 id="六、常见易错点-pitfalls" tabindex="-1">六、常见易错点 (Pitfalls) <a class="header-anchor" href="#六、常见易错点-pitfalls" aria-label="Permalink to &quot;六、常见易错点 (Pitfalls)&quot;">​</a></h2><ol><li><p><strong>文件名大小写</strong>:</p><ul><li>鸿蒙文件系统（尤其是在 Windows 上开发时）可能不区分大小写，但<strong>真机（Linux/Unix 内核）是严格区分的</strong>。</li><li>引用图片 <code>Image($r(&#39;app.media.Icon&#39;))</code> 和 <code>icon.png</code> 必须严格一致。</li></ul></li><li><p><strong>DevEco 预览器与真机差异</strong>:</p><ul><li>Previewer 显示正常不代表真机一定正常。Previewer 是基于 PC CPU 模拟的，而真机是 ARM 架构。涉及原生库 (C++) 调用时，必须上真机调试。</li></ul></li></ol><h2 id="七、总结" tabindex="-1">七、总结 <a class="header-anchor" href="#七、总结" aria-label="Permalink to &quot;七、总结&quot;">​</a></h2><p>本篇文章不仅编写了代码，还深入探讨了底层原理：</p><ol><li><strong>ArkTS 编译</strong>: AOT 带来的性能飞跃。</li><li><strong>HAP 结构</strong>: 鸿蒙应用的物理形态。</li><li><strong>声明式 UI</strong>: 初步体验基于状态驱动的开发模式。</li></ol><p>下一篇文章中，将学习构建更丰富的 UI，并深入探讨 <strong>ArkUI 的渲染管线</strong>。</p>`,42)])])}const g=a(e,[["render",t]]);export{E as __pageData,g as default};
